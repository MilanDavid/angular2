{"ast":null,"code":"import _createForOfIteratorHelper from \"D:\\\\Project\\\\angular2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createForOfIteratorHelper.js\";\nimport _classCallCheck from \"D:\\\\Project\\\\angular2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\Project\\\\angular2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { RecepieService } from '../recepies/recepies.service';\nimport 'rxjs/Rx';\nimport 'rxjs-compat/operators/map';\nimport { AuthService } from '../auth/auth.service';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../recepies/recepies.service\";\nimport * as i3 from \"../auth/auth.service\";\nexport var FirebaseService = /*#__PURE__*/(function () {\n  var FirebaseService = /*#__PURE__*/function () {\n    function FirebaseService(httpClient, recepieService, authService) {\n      _classCallCheck(this, FirebaseService);\n\n      this.httpClient = httpClient;\n      this.recepieService = recepieService;\n      this.authService = authService;\n    }\n\n    _createClass(FirebaseService, [{\n      key: \"saveRecepie\",\n      value: function saveRecepie() {\n        var token = this.authService.getToken();\n        return this.httpClient.put('https://cookbook-a8f78.firebaseio.com/recepies.json?auth=' + token, this.recepieService.getRecepies());\n      }\n    }, {\n      key: \"getRecepies\",\n      value: function getRecepies() {\n        var _this = this;\n\n        // const token = this.authService.getToken();\n        // return this.http.get('https://cookbook-a8f78.firebaseio.com/recepies.json?auth=' + token)\n        return this.httpClient.get('https://cookbook-a8f78.firebaseio.com/recepies.json').pipe(map(function (response) {\n          var recepies = response;\n\n          var _iterator = _createForOfIteratorHelper(recepies),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var recepie = _step.value;\n\n              if (!recepie['ingredients']) {\n                console.log(recepie);\n                recepie['ingredients'] = [];\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          return recepies;\n        })).subscribe(function (recepies) {\n          var recepiesData = recepies;\n\n          _this.recepieService.setRecepies(recepiesData);\n\n          console.log(recepiesData);\n        });\n      }\n    }]);\n\n    return FirebaseService;\n  }();\n\n  FirebaseService.ɵfac = function FirebaseService_Factory(t) {\n    return new (t || FirebaseService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.RecepieService), i0.ɵɵinject(i3.AuthService));\n  };\n\n  FirebaseService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: FirebaseService,\n    factory: FirebaseService.ɵfac\n  });\n  return FirebaseService;\n})();","map":null,"metadata":{},"sourceType":"module"}